<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Godot Lua PluginScript</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Installing">Installing </a></li>
<li><a href="#Documentation">Documentation </a></li>
<li><a href="#Goals">Goals </a></li>
<li><a href="#Non_goals">Non-goals </a></li>
<li><a href="#Articles">Articles </a></li>
<li><a href="#Script_example">Script example </a></li>
<li><a href="#Status">Status </a></li>
<li><a href="#Third_party_software">Third-party software </a></li>
<li><a href="#Other_projects_for_using_Lua_in_Godot">Other projects for using Lua in Godot </a></li>
</ul>


<h2>Topics</h2>
<ul class="">
  <li><a href="../topics/CHANGELOG.md.html">CHANGELOG</a></li>
  <li><strong>README</strong></li>
  <li><a href="../topics/building.md.html">building</a></li>
  <li><a href="../topics/configuring.md.html">configuring</a></li>
  <li><a href="../topics/from-gdscript-to-lua.md.html">from-gdscript-to-lua</a></li>
  <li><a href="../topics/limitations.md.html">limitations</a></li>
  <li><a href="../topics/luarocks.md.html">luarocks</a></li>
  <li><a href="../topics/plugin.md.html">plugin</a></li>
</ul>
<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/Enumerations.html">Enumerations</a></li>
  <li><a href="../modules/GD.html">GD</a></li>
  <li><a href="../modules/Globals.html">Globals</a></li>
  <li><a href="../modules/LuaObject.html">LuaObject</a></li>
  <li><a href="../modules/LuaScript.html">LuaScript</a></li>
  <li><a href="../modules/LuaScriptInstance.html">LuaScriptInstance</a></li>
  <li><a href="../modules/OOP.html">OOP</a></li>
  <li><a href="../modules/math_extras.html">math_extras</a></li>
  <li><a href="../modules/package_extras.html">package_extras</a></li>
  <li><a href="../modules/property.html">property</a></li>
  <li><a href="../modules/signal.html">signal</a></li>
  <li><a href="../modules/string_extras.html">string_extras</a></li>
</ul>
<h2>Scripts</h2>
<ul class="nowrap">
  <li><a href="../scripts/lps_coroutine.lua.html">lps_coroutine.lua</a></li>
</ul>
<h2>Classes</h2>
<ul class="nowrap">
  <li><a href="../classes/AABB.html">AABB</a></li>
  <li><a href="../classes/Array.html">Array</a></li>
  <li><a href="../classes/Basis.html">Basis</a></li>
  <li><a href="../classes/Color.html">Color</a></li>
  <li><a href="../classes/Dictionary.html">Dictionary</a></li>
  <li><a href="../classes/NodePath.html">NodePath</a></li>
  <li><a href="../classes/Object.html">Object</a></li>
  <li><a href="../classes/Plane.html">Plane</a></li>
  <li><a href="../classes/PoolByteArray.html">PoolByteArray</a></li>
  <li><a href="../classes/PoolColorArray.html">PoolColorArray</a></li>
  <li><a href="../classes/PoolIntArray.html">PoolIntArray</a></li>
  <li><a href="../classes/PoolRealArray.html">PoolRealArray</a></li>
  <li><a href="../classes/PoolStringArray.html">PoolStringArray</a></li>
  <li><a href="../classes/PoolVector2Array.html">PoolVector2Array</a></li>
  <li><a href="../classes/PoolVector3Array.html">PoolVector3Array</a></li>
  <li><a href="../classes/Quat.html">Quat</a></li>
  <li><a href="../classes/RID.html">RID</a></li>
  <li><a href="../classes/Rect2.html">Rect2</a></li>
  <li><a href="../classes/String.html">String</a></li>
  <li><a href="../classes/StringName.html">StringName</a></li>
  <li><a href="../classes/Transform.html">Transform</a></li>
  <li><a href="../classes/Transform2D.html">Transform2D</a></li>
  <li><a href="../classes/Variant.html">Variant</a></li>
  <li><a href="../classes/Vector2.html">Vector2</a></li>
  <li><a href="../classes/Vector3.html">Vector3</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/lps_coroutine.lua.html">lps_coroutine.lua</a></li>
  <li><a href="../examples/lua_repl.lua.html">lua_repl.lua</a></li>
</ul>

</div>

<div id="content">


<h1>Godot Lua PluginScript</h1>

<p><img src="extras/icon.png" alt="Lua PluginScript icon" width="128" height="128"/></p>

<p>GDNative + PluginScript library that adds support for <a href="https://www.lua.org/">Lua</a>
as a scripting language in <a href="https://godotengine.org/">Godot</a>.</p>

<p>Being a GDNative library, recompiling the engine is not required, so anyone
with a built release copied to their project can use it.
Being a PluginScript language, Lua can seamlessly communicate with scripts
written in GDScript / C# / Visual Script and vice-versa.
Since the Godot object model is dynamic at runtime, any Godot objects'
properties/methods can be accessed from Lua, including singletons like <code>OS</code>,
<code>ClassDB</code> and custom singleton nodes.
This way, one can use the language that best suits the implementation for each
script and all of them can understand each other.</p>

<p>This plugin is available in the Asset Library as <a href="https://godotengine.org/asset-library/asset/1078">Lua PluginScript</a>.</p>

<p>For some usage examples, check out <a href="lps_coroutine.lua">lps_coroutine.lua</a>
and <a href="plugin/lua_repl.lua">plugin/lua_repl.lua</a>.</p>

<p>Currently, only LuaJIT is supported, since the implementation is based on its
<a href="https://luajit.org/ext_ffi.html">FFI</a> library.</p>


<p><a name="Installing"></a></p>
<h2>Installing</h2>

<p>Either:</p>

<ul>
    <li>In Godot Editor, open the <a href="https://docs.godotengine.org/en/stable/tutorials/assetlib/using_assetlib.html#in-the-editor">Asset Library tab</a>,
    search for the <a href="https://godotengine.org/asset-library/asset/1078">Lua PluginScript</a>
    asset, download and install it.</li>
    <li>Put a built release of the library into the project folder and restart Godot.
    Make sure the <code>lua_pluginscript.gdnlib</code> file is located at the
    <code>res://addons/godot-lua-pluginscript</code> folder.</li>
    <li>Clone this repository as the project's <code>res://addons/godot-lua-pluginscript</code>
    folder and build for the desired platforms.</li>
</ul>


<p><a name="Documentation"></a></p>
<h2>Documentation</h2>

<ul>
    <li><a href="extras/docs/from-gdscript-to-lua.md">From GDScript to Lua</a></li>
    <li><a href="https://gilzoide.github.io/godot-lua-pluginscript/topics/README.md.html">Lua-specific API reference</a></li>
    <li><a href="extras/docs/configuring.md">Configuring</a></li>
    <li><a href="extras/docs/plugin.md">Editor plugin (REPL and minify on release export)</a></li>
    <li><a href="extras/docs/luarocks.md">Using LuaRocks</a></li>
    <li><a href="extras/docs/limitations.md">Known limitations</a></li>
    <li><a href="extras/docs/building.md">Building</a></li>
    <li><a href="CHANGELOG.md">Changelog</a></li>
</ul>


<p><a name="Goals"></a></p>
<h2>Goals</h2>

<ul>
    <li>Provide support for Lua as a scripting language in Godot in a way that does
    not require compiling the engine from scratch</li>
    <li>Be able to seamlessly communicate with any other language supported by Godot,
    like GDScript, Visual Script and C#, in an idiomatic way.
    This includes being able to dynamically access any Godot object's properties
    and methods using Lua's index/method notation</li>
    <li>Have automatic global access to Godot's singleton objects and custom
    singleton nodes</li>
    <li>Simple script description interface that doesn't need <a href="https://www.lua.org/manual/5.1/manual.html#pdf-require">require</a>ing anything</li>
    <li>Support for LuaJIT and Lua 5.2+</li>
    <li>Support paths relative to <code>res://*</code> and exported game/app executable path for
    <a href="https://www.lua.org/manual/5.1/manual.html#pdf-require">require</a>ing Lua modules</li>
    <li>Have a simple build process, where anyone with the cloned source code and
    installed build system + toolchain can build the project in a single step</li>
</ul>


<p><a name="Non_goals"></a></p>
<h2>Non-goals</h2>

<ul>
    <li>Provide calls to core Godot classes' methods via native method bindings</li>
    <li>Support multithreading on the Lua side</li>
</ul>


<p><a name="Articles"></a></p>
<h2>Articles</h2>

<ol>
    <li><a href="https://github.com/gilzoide/godot-lua-pluginscript/blob/main/extras/articles/1-design-en.md">Designing Godot Lua PluginScript</a></li>
    <li><a href="https://github.com/gilzoide/godot-lua-pluginscript/blob/main/extras/articles/2-infrastructure-en.md">Implementing the library's skeleton</a></li>
    <li><a href="https://github.com/gilzoide/godot-lua-pluginscript/blob/main/extras/articles/3-luajit-callbacks-en.md">Integrating LuaJIT and FFI</a></li>
    <li>Initializing and finalizing scripts (TODO)</li>
</ol>


<p><a name="Script_example"></a></p>
<h2>Script example</h2>

<p>This is an example of how a Lua script looks like.</p>


<pre>
<span class="comment">-- Class definitions are regular Lua tables, to be returned from the script
</span><span class="keyword">local</span> MyClass = {}

<span class="comment">-- Optional: set class as tool, defaults to false
</span>MyClass.is_tool = <span class="keyword">true</span>

<span class="comment">-- Optional: set base class by name, defaults to 'Reference'
</span>MyClass.extends = Node

<span class="comment">-- Optional: give your class a name
</span>MyClass.class_name = <span class="string">'MyClass'</span>

<span class="comment">-- Declare signals
</span>MyClass.something_happened = signal()
MyClass.something_happened_with_args = signal(<span class="string">"arg1"</span>, <span class="string">"arg2"</span>)

<span class="comment">-- Values defined in table are registered as properties of the class
</span><span class="comment">-- By default, properties are not exported to the editor
</span>MyClass.some_prop = <span class="number">42</span>

<span class="comment">-- The <a href="../modules/property.html#">property</a> function adds metadata to defined properties,
</span><span class="comment">-- like setter and getter functions
</span>MyClass.some_prop_with_details = property {
  <span class="comment">-- ["default_value"] or ["default"] or [1] = property default value
</span>  <span class="number">5</span>,
  <span class="comment">-- ["type"] or [2] = variant type, optional, inferred from default value
</span>  <span class="comment">-- All Godot variant type names are defined globally as written in
</span>  <span class="comment">-- GDScript, like bool, int, float, String, Array, Vector2, etc...
</span>  <span class="comment">-- Notice that Lua &lt;= 5.2 does not differentiate integers from float
</span>  <span class="comment">-- numbers, so we should always specify <code>int</code> where appropriate
</span>  <span class="comment">-- or use <code>int(5)</code> in the default value instead
</span>  <span class="global">type</span> = int,
  <span class="comment">-- ["get"] or ["getter"] = getter function or method name, optional
</span>  get = <span class="keyword">function</span>(self)
    <span class="keyword">return</span> self.some_prop_with_details
  <span class="keyword">end</span>,
  <span class="comment">-- ["set"] or ["setter"] = setter function or method name, optional
</span>  set = <span class="string">'set_some_prop_with_details'</span>,
  <span class="comment">-- ["usage"] = property usage, from <code>enum godot_property_usage_flags</code>
</span>  <span class="comment">-- optional, default to <code>PropertyUsage.NOEDITOR</code>
</span>  usage = PropertyUsage.NOEDITOR,
  <span class="comment">-- ["hint"] = property hint, from <code>enum godot_property_hint</code>
</span>  <span class="comment">-- optional, default to <code>PropertyHint.NONE</code>
</span>  hint = PropertyHint.RANGE,
  <span class="comment">-- ["hint_string"] = property hint text, only required for some hints
</span>  hint_string = <span class="string">'1,10'</span>,
  <span class="comment">-- ["rset_mode"] = property remote set mode, from <code>enum godot_method_rpc_mode</code>
</span>  <span class="comment">-- optional, default to <code>RPCMode.DISABLED</code>
</span>  rset_mode = RPCMode.MASTER,
}
<span class="comment">-- The <code>export</code> function is an alias for <a href="../modules/property.html#">property</a> that always exports
</span><span class="comment">-- properties to the editor
</span>MyClass.exported_prop = export { <span class="string">"This property appears in the editor"</span> }
MyClass.another_exported_prop = export {
  <span class="string">[[This one also appears in the editor,
now with a multiline TextArea for edition]]</span>,
  hint = PropertyHint.MULTILINE_TEXT,
}

<span class="comment">-- Functions defined in table are public methods
</span><span class="keyword">function</span> MyClass:_ready()  <span class="comment">-- <code>function t:f(...)</code> is an alias for <code>function t.f(self, ...)</code>
</span>  <span class="comment">-- Singletons are available globally
</span>  <span class="keyword">local</span> os_name = OS:get_name()
  <span class="global">print</span>(<span class="string">"MyClass instance is ready! Running on a "</span> .. os_name .. <span class="string">" system"</span>)

  <span class="comment">-- There is no <code>onready</code> keyword like in GDScript
</span>  <span class="comment">-- Just get the needed values on <code>_ready</code> method
</span>  <span class="comment">-- Also, Lua doesn't have the <code>$child_node</code> syntax, use <code>get_node</code> instead
</span>  self.some_grandchild_node = self:get_node(<span class="string">"some/grandchild_node"</span>)
<span class="keyword">end</span>

<span class="keyword">function</span> MyClass:set_some_prop_with_details(value)
    self.some_prop_with_details = value
    <span class="comment">-- Indexing <code>self</code> with keys undefined in script will search base
</span>    <span class="comment">-- class for methods and properties
</span>    self:emit_signal(<span class="string">"something_happened_with_args"</span>, <span class="string">"some_prop_with_details"</span>, value)
<span class="keyword">end</span>

<span class="keyword">function</span> MyClass:get_some_prop_doubled()
  <span class="keyword">return</span> self.some_prop * <span class="number">2</span>
<span class="keyword">end</span>

<span class="comment">-- In the end, table with class declaration must be returned from script
</span><span class="keyword">return</span> MyClass
</pre>



<p><a name="Status"></a></p>
<h2>Status</h2>

<ul>
    <li>[X] LuaJIT support</li>
    <li>[ ] Lua 5.2+ support</li>
    <li>[X] Useful definitions for all GDNative objects, with methods and metamethods</li>
    <li>[X] A <code>yield</code> function similar to GDScript's, to resume after a signal is
    emitted (<a href="../modules/GD.html#yield">GD.yield</a>)</li>
    <li>[X] Working PluginScript language definition</li>
    <li>[X] PluginScript script validation and template source code</li>
    <li>[ ] PluginScript code editor callbacks</li>
    <li>[ ] PluginScript debug callbacks</li>
    <li>[ ] PluginScript profiling callbacks</li>
    <li>[X] Package searcher for Lua and C modules that work with paths relative to
    the <code>res://</code> folder and/or exported games' executable path</li>
    <li>[X] Lua REPL</li>
    <li>[X] API documentation</li>
    <li>[ ] Unit tests</li>
    <li>[ ] Example projects</li>
    <li>[X] Export plugin to minify Lua scripts</li>
    <li>[X] Drop-in binary release in GitHub</li>
    <li>[X] Submit to Asset Library</li>
</ul>


<p><a name="Third_party_software"></a></p>
<h2>Third-party software</h2>

<p>This project uses the following software:</p>

<ul>
    <li><a href="https://github.com/godotengine/godot-headers">godot-headers</a>: headers for
    GDNative, distributed under the MIT license</li>
    <li><a href="https://luajit.org/luajit.html">LuaJIT</a>: Just-In-Time Compiler (JIT) for the
    Lua programming language, distributed under the MIT license</li>
    <li><a href="https://github.com/gilzoide/high-level-gdnative">High Level GDNative (HGDN)</a>:
    higher level GDNative API header, released to the Public Domain</li>
    <li><a href="https://github.com/jirutka/luasrcdiet">LuaSrcDiet</a>: compresses Lua source
    code by removing unnecessary characters, distributed under the MIT license</li>
    <li><a href="https://github.com/bluebird75/luaunit">LuaUnit</a>: unit-testing framework for
    Lua, distributed under the BSD license</li>
    <li><a href="https://github.com/slembcke/debugger.lua">debugger.lua</a>: dependency free,
    single file embeddable debugger for Lua, distributed under the MIT license</li>
</ul>


<p><a name="Other_projects_for_using_Lua_in_Godot"></a></p>
<h2>Other projects for using Lua in Godot</h2>

<ul>
    <li>https://github.com/perbone/luascript</li>
    <li>https://github.com/Trey2k/lua</li>
    <li>https://github.com/zozer/godot-lua-module</li>
</ul>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2023-01-04 08:52:34 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
